<!DOCTYPE html>
<html>
<title>CCC: Lesson 18</title>
<META NAME="COPYRIGHT" CONTENT="&copy; Ria Stroes">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
<META name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3-theme-pink.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.3/p5.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.3/addons/p5.dom.min.js" type="text/javascript"></script>
<script src="http://www.w3schools.com/lib/w3data.js"></script>
<script src="../mylib/Google.js" type="text/javascript"></script>
<style>
.w3-sidenav a {padding:16px;}
</style>
<body>
  <div w3-include-html="menu.html"></div>
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" id="myOverlay"></div>
<div class="w3-main" style="margin-left:250px;">
<div id="myTop" class="w3-top w3-container w3-padding-16 w3-theme w3-large">
  <i class="fa fa-bars w3-opennav w3-hide-large w3-xlarge w3-margin-left w3-margin-right" onclick="w3_open()"></i>
  <span id="myIntro" class="w3-hide">Creative Coding Course in P5</span>
</div>

<header class="w3-container w3-theme w3-padding-64" style="padding-left:16px">
  <h1 class="w3-xxxlarge w3-padding-16">Creative Coding Course</h1>
  <h2 class="w3-large">Lesson 18: Functions</h2>
</header>

<div class="w3-container" >

  <div class="w3-row">
    <div class="w3-twothird w3-container">
      <div class="w3-container">
        <br/>
      <p>
      By now your code will grow larger and it's time to learn to organize your code.
      A function is a block of code designed to perform a particular task.

      </p>
        <h2 class="w3-theme-l2 w3-center">Functions</h2>
        <p>We have already seen several functions, like setup, draw, ellipse, etc.<br/>
           These functions are part of the p5 library. So you already know how to call a function.<br/>
           Now you will learn how to define a function:
          <pre>
            function <i>functionname</i>( <i>param1, param2, ...</i>){
              ...
              return value;
            }
          </pre>
          A function should<br/>
          - have a descriptive name, this makes your code easer to read. <br/>
          - execute a clear task, this makes your code comprehensible.<br/>
          - be reuseble by use of params, this makes your code flexible.<br/><br/>

          Give your functions a descriptive name<br/>
          Example: function drawAnimal(image, position);<br/>
          This function should draw an animal on a position.<br/>
          This function should draw the hole animal, not a part.<br/>
          This function can draw animals on different positions.<br/><br/>

          If you develop your own functions, you can add them in your script after the draw function or you can create your own library in a seperate .js file.<br/>
          Include your own library in your main html page and you can call your own functions in different animations.<br/>

          <pre>
              //save your file with javascript functions as functions.js
              //create a submap 'mylibrary' in the root of your project.
              //insert inside the heading of your index.html:
             &lt;script&gt; src="mylibrary/myfunctions.js" type="text/javascript">&lt;/script&gt;
          </pre>


          A function can have a return value.<br/>
          The result of function is stored in a variable<br/>
          For example:<br/>

          <pre>
          //definition<br/>
          function sum(a,b){
            //this function will add the values, stored in the two params.
            return a+b;
          }

          //call function<br/>
          var c = sum(a,b);<br/>
          </pre>
          But not all functions have a return value, the setup function and the draw function are examples of functions that execute a specific task,

          but as you know, they don't have a return function.<br/>
          The function sum is a very simple function and not so smart, but functions can be very powerfull and can include many lines of codes.<br/>
          <pre>
          Be smart and write your code only once! Create Functions!
          </pre>

        </p>

        <p>So let's create a function.
          This next function will slow down your animation:
          <pre>
            function changeSpeedOfAnimation(){
              var speed = frameRate();
              ...
            }
          </pre>
          The code above we call the definition of a function. It is not executed yet. You have to call this function
          in your code.
          Lets call this function, when you press the - button on your keyboard. javascript is listening to all kind of events, when your code is running.
          The keyboard event is one of those events, just like the mouse events. When it hears this event it will call the p5 keyPressed function.
          the variable keyCode is set with the ASCII code of the pressed key. You can find these ASCII codes
          <a href="https://www.w3schools.com/charsets/ref_html_ascii.asp"> HTML ASCII REFERENCE </a>
          Now you can test which key is pressed. The keyCode of the - (minus) is 189 or 109.
          ASCII codes are on all the computers the same.
          <pre>
            function keyPressed(){
             if (keyCode == 189 ||  p.keyCode == 109 ){
                changeSpeedOfAnimation();
              }
            }
          </pre>
          The function frameRate() without any params will give you the current frameRate.
          If you call this function with a param, the speed, it will set the frameRate to that speed, between 0 and maximum 60.


        </div>
    </div>
   <div class="w3-third w3-container">

      <ul class="w3-ul">
        <li><h2>You will learn</h2></li>
        <li>Functions</li>
        <li>Parameters</li>
        <li>return</li>
        <li>library</li>
        <li>keyPressed</li>
        <li>keyCode</li>
        <li>keyIsPressed</li>
        <li>HTML ASCII REFERENCE</li>
        <li>frameRate()</li>
        <li>floor</li>
        <li>ceil</li>
      </ul>
    </div>
  </div>

  <div class="w3-row  w3-theme-light ">
      <div class="w3-container w3-half">
      <pre>
//first click on the example window, so it will have the focus.
//you can use the - to change speed of the animation
var size;

function setup() {
  createCanvas(windowWidth, windowHeight);
  background(0,0,200);
  size = 100;
}
function draw(){
    stroke(0);
    ellipse(random(width), random(height),size, size);
}
function keyPressed(){

      if(keyCode == 189 ||  keyCode == 109 ){
        slowDownAnimation();
    }
      if(keyCode == 187 ||  keyCode == 107 ){
        speedUpAnimation();
    }
  }
  function showSpeed(speed){
    textSize(100);
    stroke(0);
    fill(255);
    text(speed, 30,130);
  }
  function slowDownAnimation{
    var speed = p.frameRate();
    if(speed > 1 ){
      speed = 1;
      frameRate(speed);
      showSpeed(speed);
    }
  }
  p.speedUpAnimation = function(){
    var speed = p.frameRate();
    if(speed < 10 ){
      speed = 60;
      p.frameRate(speed);
      showSpeed(speed);
    }
  }
}      </pre>
      </div>
      <div class="w3-half w3-container">
        <div class="w3-example">

          <br/>
          <div id="divcanvas1">
            <script>
            var s1 = function( p ) {
            var size;

            p.setup = function() {
              var canvas = p.createCanvas(400,320);
              canvas.parent("divcanvas1");
              p.background(0,200,0);
              size = 50;
            }

            p.draw = function() {
               p.stroke(0);
               p.fill(p.random(255),p.random(255),p.random(255));
               p.ellipse(p.random(p.width), p.random(p.height),size,size);
            }

            p.keyPressed = function(){

                if(p.keyCode == 189 ||  p.keyCode == 109 ){
                  p.slowDownAnimation();
              }
                if(p.keyCode == 187 ||  p.keyCode == 107 ){
                  p.speedUpAnimation();
              }
            }
            p.showSpeed = function(speed){
              p.textSize(100);
              p.stroke(0);
              p.fill(255);
              p.text(speed, 30,130);
            }
            p.slowDownAnimation = function(){
              var speed = p.frameRate();
              if(speed > 1 ){
                speed = 1;
                p.frameRate(speed);
                p.showSpeed(speed);
              }
            }
            p.speedUpAnimation = function(){
              var speed = p.frameRate();
              if(speed < 10 ){
                speed = 60;
                p.frameRate(speed);
                p.showSpeed(speed);
              }
            }
          };
            var my1 = new p5(s1, 'c1');
            </script>
          </div>
          <p>
            <a href="https://www.openprocessing.org/sketch/411841">open sketch in openprocessing</a>
          </p>

        </div>
      </div>
      </div>
      <div class="w3-row">
        <div class="w3-one w3-container">
          <div class="w3-container">
            <br/>
          <p>
            When you have to write the same code twice or almost the same code, then it's time to create a function.
            In the example above the function showSpeed is used twice.

            Often functions are used to organize the code. <br/>
            In the next example I have created first the pseudo-code in functions.
          </p>
        </div>
      </div>
    </div>
<div class="w3-row  w3-theme-light ">
<div class="w3-container w3-half">
<pre>
  //pseudo-code
  //game a cat is laying in front of a hole, and when the mouse comes out, the cat is trying to catch the mouse.
  //move the cat with your mouse, but be quick.


  function createBackground(){
    //There are two holes in the background.
  }
  function createMouse(x,y){
    // mouse to the left and mouse to the right
  }
  function liveMouse(x,y){
    // mouse is running from hole 1 t0 hole 2 or from hole 2 to hole 1
    - selectHoleAndWait
    - runMouse
  }
  function createCat(x,y, type ){
    //the cat has two shapes, one in waiting position.
    //one in jumping position.
  }
  function actionCat(){
    // the cat can jump to catch the mouse.
  }

  </pre>
  <p>Think about all the aspects of your animation or game, and write it down in pseudo-code.
    Use functions to order your idea and your code!
    Give your functions a good descriptive name.
    Now your big problem is split into smaller problems.
    Start solving your problems one by one.
  </p>
  </div>

  <div class="w3-half w3-container">
    <div class="w3-example">

      <br/>
      <div id="divcanvas2">
        <script>
        var s2 = function( p ) {

         var x1,y1, x2,y2; //positions of the holes
         var x,y; //positon of mouse
         var typeCat;
         var isRunning;
         var direction;
 		     var speed;
         var wait;

         p.setup = function() {
           var canvas = p.createCanvas(400,400);
           canvas.parent("divcanvas2");
           x1 = 50;			//hole 1 in the background
           y1 = 100;
           x2 = p.width-50;		//hole 2 in the background
           y2 = 100;
           x = x1;
           y = y1;
           typeCat = "none";
           isRunning = false;
           direction = 0;
           speed = 1;
           wait = 0;
         }
         p.draw = function() {
           createBackground();
           liveMouse();
           createCat(p.mouseX,p.mouseY);
         }
         p.mousePressed = function(){
           actionCat();
         }
         createBackground = function(){
             //There are three holes in the background.
             p.background(200,200,20);
             p.stroke(0);
             p.fill(0);
             p.ellipse(x1, y1, 60,60);
             p.ellipse(x2, y2, 60,60);
         }
         createMouse = function(x,y, direction){
           p.stroke(0);
           p.fill(0);
           if(direction == 1){ // mouse is going to the right
             p.ellipse(x, y, 20,10);
             p.ellipse(x+5, y-5, 5,5);
             p.ellipse(x+5, y+5, 5,5);

             p.triangle(x, y-4, x, y+4, x+10, y);
             p.strokeWeight(2);
             p.line(x,y, x-30, y);
           }
           else{ // mouse is going to the left
             p.ellipse(x, y, 20,10);
             p.ellipse(x-5, y-5, 5,5);
             p.ellipse(x-5, y+5, 5,5);

             p.triangle(x, y-4, x, y+4, x-10, y);
             p.strokeWeight(2);
             p.line(x,y, x+30, y);
           }
         }
         createCat = function(x,y){
           p.stroke(0);
           p.fill(0);
           if(typeCat == "none"){
             p.textSize(30);
             p.stroke(0);
             p.fill(0);
             p.text("click mouse to start.", 50,200);
             p.text("click cat to catch mouse", 50,230);


           }
           else if(typeCat == "wait"){
             if(y < y1 + 100){
               y = y1 + 100;
             }
             p.ellipse(x, y, 40,40);
             p.ellipse(x, y-20, 30,30);
             p.triangle(x-10, y-30, x-5, y-30, x-10, y-40);
             p.triangle(x+10, y-30, x+5, y-30, x+10, y-40);
             p.strokeWeight(4);
             p.line(x,y+20, x-60, y+20);
           }
           else if(typeCat == "jump"){
             y = y1+45;
             p.ellipse(x, y-10, 40,60);
             p.ellipse(x, y-50, 30,30);
             p.triangle(x-15, y-55, x-5, y-60, x-15, y-70);
             p.triangle(x+15, y-55, x+5, y-60, x+15, y-70);
             p.strokeWeight(5);
             p.line(x,y+20, x, y+90);
             p.strokeWeight(8);

             p.line(x,y, x-10, y-90);
             p.line(x,y, x+10, y-90);
             p.line(x-10,y, x-10, y+90);
             p.line(x+10,y, x+10, y+90);
           }

         }
         liveMouse = function(){
           if(isRunning == false){
             selectHoleAndWait();
           }
           else{
             runMouse();
           }
           createMouse(x,y,direction);
         }

         selectHoleAndWait = function(){
           if(wait > 0){
             wait -= 1;
           }
           else{
             if(p.random(2)<1){
                  x = x1;
                  y = y1;
                  direction = 1;
                  speed += 0.3;
                }
            else{
                  x = x2;
                  y = y2;
                  direction = -1;
                  speed += 0.3;
                }
            isRunning = true;
           }


         }
         runMouse = function(){
           if(isRunning){
             x += (direction * speed);
             if(x > x2 || x < x1){
               wait = p.floor(p.random(1000));
               isRunning = false;
             }
           }

         }


         mouseIsDeath = function(){
           direction = 0;
           wait = p.floor(p.random(1000));
           isRunning = false;

         }
         actionCat = function(){
           if(typeCat == "wait"){
            typeCat = "jump";
            if(abs(p.mouseX-(x))<10){
              mouseIsDeath();
            }
            else{
              direction = -direction;
              typeCat ="wait";
            }
          }
          else {
            typeCat ="wait";
            wait = 0;
          }
         }

      };
        var my1 = new p5(s2, 'c1');
        </script>
      </div>
      <p>
        <a href="https://www.openprocessing.org/sketch/412731">open sketch in openprocessing</a>
      </p>

    </div>
  </div>
</div>
<div class="w3-row">
  <div class="w3-one w3-container">
    <div class="w3-container">
      <br/>
      <p>
        The next handy function will save an image of your animation
        and add a copyright sign to it.

        This function is called after pressing the s on your keyboard.
        Don't add this function in the draw loop, because your browser
        will keep asking if you want to save an image and it will get
        stuck in a never ending loop.

      </p>
    </div>
  </div>
</div>
<div class="w3-row  w3-theme-light ">
<div class="w3-container w3-half">
<pre>
  ...
  function keyPressed(){
    if(keyCode == 83 || keyCode == 115){   // S or s
      saveImage("abstract");
    }
  }
  function saveImage(filename) {

    //use frameCount as sequence number.
    var name = filename  + p1.frameCount + ".png";
    //copyright in the right-bottom-corner.
     p1.fill(0);
     p1.text("&copy;riastroes2017", p1.width-100, p1.height-20);
     p1.save(name);
  }
  ...
  </pre>
  </div>

  <div class="w3-half w3-container">
    <div class="w3-example">

      <br/>
      <div id="divcanvas4">

          <script>
          var s1 = function( p1 ) {
          p1.setup = function() {
            var canvas = p1.createCanvas(400,320);
            canvas.parent("divcanvas4");
            p1.background(0,200,0);
          }

          p1.draw = function() {

            p1.fill(p1.random(255));
            p1.ellipse(p1.mouseX, p1.mouseY, 100);

          }
          p1.keyPressed = function(){
            if(p1.keyCode == 83 || p1.keyCode == 115){
              saveImage("abstract");
            }
          }
          saveImage = function(filename) {
            //copyright in the right-bottom-corner.
            p1.fill(0);
            p1.text("copyright RiaStroes2017", p1.width-135, p1.height-20);

            //use frameCount as sequence number.
            var name = filename  + p1.frameCount + ".png";
            p1.save(name);
          }
          };
          var my1 = new p5(s1, 'c1');
        </script>
      </div>
      <p>
        <a href="https://www.openprocessing.org/sketch/412810">open sketch in openprocessing</a>
      </p>

    </div>
  </div>
</div>

  <div class="w3-row">
      <div class="w3-one " style="padding:16px">
  <h1  class="w3-theme-l2 w3-center w3-jumbo">Assignments</h1>
  <h3>3. Create your own save function.</h3>
  <ul class ="w3-ul" >
      <li>save a frame of your animation.</li>
      <li>add your initials, signature or copyright</li>
      <li>save this function in a seperate .js file</li>
      <li>add this file to your next project in the index.html.</li>
  </ul>

  <h3>2. Paintbox</h3>

  <ul class ="w3-ul" >
      <li>Create different function for different brushes.</li>
      <li>A brush has a small shape.</li>
      <li>A brush has transparent of opaque colors.</li>
      <li>Switch brushes by pressing a key on your keyboard.</li>
      <li>clear your canvas by pressing the spacebar.</li>
      <li>a solution:<a href="https://www.openprocessing.org/sketch/412815">paintbox</a></li>
  </ul>

  <h3>3. Game 1</h3>
  <ul class ="w3-ul" >
      <li>Write your own simple game in pseudo-code</li>
      <li>Try to create some of the functions.</li>
  </ul>
  <h3>4. Game 2</h3>
  <ul class ="w3-ul" >
      <li>Create the background of a labyrinth game.</li>
  </ul>
  <h3>5. Game 3</h3>
  <ul class ="w3-ul" >
      <li>Create a function to simulate the rolling of a dice.</li>
  </ul>



<hr>
<p>

Please join my class on OpenProcessing to share your Processing sketches.<br/>
Go to:<a href="https:/www.openprocessing.org/class/55734"> https:/www.openprocessing.org/class/55734</a> and use the code: 30DEEA to join.<br/>
Or publish an image of your sketch on Facebook page <a href="https://www.facebook.com/creativecodingcourse">https://www.facebook.com/creativecodingcourse</a><br/>
It will be an inspiration for other students.<br/>
If you have any question about this lesson, send me an email <a href="mailto:riastroes@gmail.com?subject:lesson12">riastroes@gmail.com</a></p>
</p></div>
</div>

<footer class="w3-container w3-theme-d3 w3-padding-32" style="padding-left:32px">
    <span class="w3-left"><a  href="http://www.riastroes.nl">www.riastroes.nl</a></span><span class="w3-right">copyright &copy; Ria Stroes</span>
</footer>
</div>
<script>
//include HTML
w3IncludeHTML();

// Open and close the sidenav on medium and small screens
function w3_open() {
    document.getElementById("mySidenav").style.display = "block";
    document.getElementById("myOverlay").style.display = "block";
}
function w3_close() {
    document.getElementById("mySidenav").style.display = "none";
    document.getElementById("myOverlay").style.display = "none";
}

// Change style of top container on scroll
window.onscroll = function() {myFunction()};
function myFunction() {
    if (document.body.scrollTop > 80 || document.documentElement.scrollTop > 80) {
        document.getElementById("myTop").classList.add("w3-card-4");
        document.getElementById("myIntro").classList.add("w3-show-inline-block");
    } else {
        document.getElementById("myIntro").classList.remove("w3-show-inline-block");
        document.getElementById("myTop").classList.remove("w3-card-4");
    }
}

// Accordions
function myAccordion(id) {
    var x = document.getElementById(id);
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
        x.previousElementSibling.className += " w3-theme";
    } else {
        x.className = x.className.replace("w3-show", "");
        x.previousElementSibling.className =
        x.previousElementSibling.className.replace(" w3-theme", "");
    }
}
</script>

</body>
</html>
