<!DOCTYPE html>
<html>
<title>CCC: Lesson 18</title>
<META NAME="COPYRIGHT" CONTENT="&copy; Ria Stroes">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
<META name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3-theme-pink.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.3/p5.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.3/addons/p5.dom.min.js" type="text/javascript"></script>
<script src="http://www.w3schools.com/lib/w3data.js"></script>
<script src="../mylib/Google.js" type="text/javascript"></script>
<style>
.w3-sidenav a {padding:16px;}
</style>
<body>
  <div w3-include-html="menu.html"></div>
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" id="myOverlay"></div>
<div class="w3-main" style="margin-left:250px;">
<div id="myTop" class="w3-top w3-container w3-padding-16 w3-theme w3-large">
  <i class="fa fa-bars w3-opennav w3-hide-large w3-xlarge w3-margin-left w3-margin-right" onclick="w3_open()"></i>
  <span id="myIntro" class="w3-hide">Creative Coding Course in P5</span>
</div>

<header class="w3-container w3-theme w3-padding-64" style="padding-left:16px">
  <h1 class="w3-xxxlarge w3-padding-16">Creative Coding Course</h1>
  <h2 class="w3-large">Lesson 18: Functions</h2>
</header>

<div class="w3-container" >

  <div class="w3-row">
    <div class="w3-twothird w3-container">
      <div class="w3-container">
        <br/>
      <p>
      By now your code will grow larger and it's time to learn to organize your code.
      A function is a block of code designed to perform a particular task.

      </p>
        <h2 class="w3-theme-l2 w3-center">Functions</h2>
        <p>We have seen already a lot of functions, like setup, draw, ellipse, etc.<br/>
           These functions are part of the p5 library. So you already know how to call a function.<br/>
           Now you will learn how to define a function:
          <pre>
            function <i>functionname</i>( <i>param1, param2, ...</i>){
              ...
              return value;
            }
          </pre>
          A function should<br/>
          - have a descriptive name, this makes your code easer to read. <br/>
          - execute a clear task, this makes your code comprehensible.<br/>
          - be reuseble by use of params, this makes your code flexible.<br/><br/>

          Give your functions a descriptive name<br/>
          Example: function drawAnimal(image, position);<br/>
          This function should draw an animal on a position.<br/>
          This function should draw the hole animal, not a part.<br/>
          This function can draw animals on different positions.<br/><br/>

          If you develop your own functions, you can add them in your script after the draw function or you can create your own library in a seperate .js file.<br/>
          Include your own library in your main html page and you can call your own functions in different animations.<br/>

          <pre>
              //save your file with javascript functions as functions.js
              //create a submap 'mylibrary' in the root of your project.
              //insert inside the heading of your index.html:
             &lt;script&gt; src="mylibrary/myfunctions.js" type="text/javascript">&lt;/script&gt;
          </pre>


          A function can have a return value.<br/>
          The result of function is stored in a variable<br/>
          For example:<br/>

          <pre>
          //definition<br/>
          function sum(a,b){
            //this function will add the values, stored in the two params.
            return a+b;
          }

          //call function<br/>
          var c = sum(a,b);<br/>
          </pre>
          But not all functions have a return value, the setup function and the draw function are examples of functions that execute a specific task,

          but as you know, they don't have a return function.<br/>
          The function sum is a very simple function and not so smart, but functions can be very powerfull and can include many lines of codes.<br/>
          <pre>
          Be smart and write your code only once! Create Functions!
          </pre>

        </p>

        <p>So let's create a function.
          This next function will slow down your animation:
          <pre>
            function changeSpeedOfAnimation(){
              var speed = frameRate();
              ...
            }
          </pre>
          The code above we call the definition of a function. It is not executed yet. You have to call this function
          in your code.
          Lets call this function, when you press the - button on your keyboard. javascript is listening to all kind of events, when your code is running.
          The keyboard event is one of those events, just like the mouse events. When it hears this event it will call the p5 keyPressed function.
          the variable keyCode is set with the ASCII code of the pressed key. You can find these ASCII codes
          <a href="https://www.w3schools.com/charsets/ref_html_ascii.asp"> HTML ASCII REFERENCE </a>
          Now you can test which key is pressed. The keyCode of the - (minus) is 189 or 109.
          ASCII codes are on all the computers the same.
          <pre>
            function keyPressed(){
             if (keyCode == 189 ||  p.keyCode == 109 ){
                changeSpeedOfAnimation();
              }
            }
          </pre>
          The function frameRate() without any params will give you the current frameRate.
          If you call this function with a param, the speed, it will set the frameRate to that speed, between 0 and maximum 60.


        </div>
    </div>
   <div class="w3-third w3-container">

      <ul class="w3-ul">
        <li><h2>You will learn</h2></li>
        <li>Functions</li>
        <li>Parameters</li>
        <li>return</li>
        <li>library</li>
        <li>keyPressed</li>
        <li>keyCode</li>
        <li>keyIsPressed</li>
        <li>HTML ASCII REFERENCE</li>
        <li>frameRate()</li>
        <li>floor</li>
        <li>ceil</li>
      </ul>
    </div>
  </div>

  <div class="w3-row  w3-theme-light ">
      <div class="w3-container w3-half">
      <pre>
//first click on the example window, so it will have the focus.
//you can use the - to change speed of the animation
var size;

function setup() {
  createCanvas(windowWidth, windowHeight);
  background(0,0,200);
  size = 100;
}
function draw(){
    stroke(0);
    ellipse(random(width), random(height),size, size);
}
function keyPressed(){

      if(keyCode == 189 ||  keyCode == 109 ){
        slowDownAnimation();
    }
      if(keyCode == 187 ||  keyCode == 107 ){
        peedUpAnimation();
    }
  }
  function showSpeed(speed){
    textSize(100);
    stroke(0);
    fill(255);
    text(speed, 30,130);
  }
  function slowDownAnimation{
    var speed = p.frameRate();
    if(speed > 1 ){
      speed = 1;
      frameRate(speed);
      showSpeed(speed);
    }
  }
  p.speedUpAnimation = function(){
    var speed = p.frameRate();
    if(speed < 10 ){
      speed = 60;
      p.frameRate(speed);
      showSpeed(speed);
    }
  }
}      </pre>
      </div>
      <div class="w3-half w3-container">
        <div class="w3-example">

          <br/>
          <div id="divcanvas1">
            <script>
            var s1 = function( p ) {
            var size;

            p.setup = function() {
              var canvas = p.createCanvas(400,320);
              canvas.parent("divcanvas1");
              p.background(0,200,0);
              size = 50;
            }

            p.draw = function() {
               p.stroke(0);
               p.fill(0,0,p.random(255));
               p.ellipse(p.random(p.width), p.random(p.height),size,size);
            }

            p.keyPressed = function(){

                if(p.keyCode == 189 ||  p.keyCode == 109 ){
                  p.slowDownAnimation();
              }
                if(p.keyCode == 187 ||  p.keyCode == 107 ){
                  p.speedUpAnimation();
              }
            }
            p.showSpeed = function(speed){
              p.textSize(100);
              p.stroke(0);
              p.fill(255);
              p.text(speed, 30,130);
            }
            p.slowDownAnimation = function(){
              var speed = p.frameRate();
              if(speed > 1 ){
                speed = 1;
                p.frameRate(speed);
                p.showSpeed(speed);
              }
            }
            p.speedUpAnimation = function(){
              var speed = p.frameRate();
              if(speed < 10 ){
                speed = 60;
                p.frameRate(speed);
                p.showSpeed(speed);
              }
            }
          };
            var my1 = new p5(s1, 'c1');
            </script>
          </div>
          <p>
            <a href="https://www.openprocessing.org/sketch/411841">open sketch in openprocessing</a>
          </p>

        </div>
      </div>
      </div>
      <div class="w3-row">
        <div class="w3-one w3-container">
          <div class="w3-container">
            <br/>
          <p>
            When you have to write the same code twice or almost the same code, then it's time to create a function.
            In the example above the function showSpeed is used twice.

            Often functions are used to organize the code. <br/>
            In the next example I have created first the pseudo-code in functions.
          </p>
        </div>
      </div>
    </div>
<div class="w3-row  w3-theme-light ">
<div class="w3-container w3-half">
<pre>
  //pseudo-code
  //game a cat is laying in front of a hole, and when the mouse comes out, the cat is trying to catch the mouse.
  //move the cat with the spacebar of your keyboard, but be quick.


  function createBackground(){
    //There are two holes in the background.
  }
  function createCat(x,y, type ){
    //the cat has two shapes, one in standing position
    //one after he has jumped.
  }
  function createMouse(x,y){
    // the mouse is running from hole to hole.
  }
  function runMouse(x,y){
    // Run mouse from hole 1 naar hole 2 or from hole 2 naar hole 1
  }
  function jumpCat(hole){
    // the cat will jump to position 1, 2 or 3.
  }

  </pre>
  <p>Think about all the aspects of your animation or game, and write it down in pseudo-code.
    Use function to order your idea and your code!
    Give your functions a good descriptive name.
    Now your problem is split into smaller problems, you can solve.
  </p>
  </div>

  <div class="w3-half w3-container">
    <div class="w3-example">

      <br/>
      <div id="divcanvas2">
        <script>
        var s2 = function( p0 ) {
        //positions of the holes and the mouse
        //positions of the holes and the mouse
         var x1,y1, x2,y2, x3,y3;
         var typeCat;
         var run;
 		var runx;
         var direction;
 		var speed;

         setup = function() {
           var canvas = createCanvas(400,400);
           typeCat = "none";
           run = false;
           runx = 0;
           direction = 0;
           speed = 1;

         }
         draw = function() {
           createBackground();
           runMouse();
           createCat(mouseX,mouseY);
         }
         createBackground = function(){
             //There are three holes in the background.
             background(200,200,20);
             x1 = 50;
             y1 = 100;
             stroke(0);
             fill(0);
             ellipse(x1, y1-20, 60,60);
             x2 = 300;
             y2 = 100;
             ellipse(x2, y2-20, 60,60);
         }
         createMouse = function(x,y, direction){
           stroke(0);
           fill(0);
           if(direction == 1){ // mouse is going to the right
             ellipse(x, y, 20,10);
             ellipse(x+5, y-5, 5,5);
             ellipse(x+5, y+5, 5,5);

             triangle(x, y-4, x, y+4, x+10, y);
             strokeWeight(2);
             line(x,y, x-30, y);
           }
           else{ // mouse is going to the left
             ellipse(x, y, 20,10);
             ellipse(x-5, y-5, 5,5);
             ellipse(x-5, y+5, 5,5);

             triangle(x, y-4, x, y+4, x-10, y);
             strokeWeight(2);
             line(x,y, x+30, y);
           }
         }
         createCat = function(x,y){
           stroke(0);
           fill(0);

           if(typeCat == "wait"){
             if(y < y1 + 100){
               y = y1 + 100;
             }
             ellipse(x, y, 40,40);
             ellipse(x, y-20, 30,30);
             triangle(x-10, y-30, x-5, y-30, x-10, y-40);
             triangle(x+10, y-30, x+5, y-30, x+10, y-40);
             strokeWeight(4);
             line(x,y+20, x-60, y+20);
           }
           else if(typeCat == "jump"){
             y = y1+45;
             ellipse(x, y-10, 40,60);
             ellipse(x, y-50, 30,30);
             triangle(x-15, y-55, x-5, y-60, x-15, y-70);
             triangle(x+15, y-55, x+5, y-60, x+15, y-70);
             line(x,y+20, x, y+90);
             strokeWeight(8);
             line(x,y, x-10, y-90);
             line(x,y, x+10, y-90);
             line(x-10,y, x-10, y+90);
             line(x+10,y, x+10, y+90);
           }
           else if(typeCat == "none"){
             textSize(30);
             stroke(0);
             fill(0);
             text("click mouse to start", 50,200);
             text("jump on mouse to win!", 50,230);
           }
         }
         runMouse = function(){

           if(run == false){
             if(random(2)<1){
               direction = 1;
               createMouse(x1,y1, direction); // mouse in hole 1
               run = true;
             }
             else{
               direction = -1;
               createMouse(x2,y2, direction); // mouse in hole2
               run = true;
             }
           }
           else{

             if(typeCat == "wait"){
               run = true;
               runx += direction * speed;
               if(direction == 1){ //going to the right
                 createMouse(x1 + runx,y1, direction)
                 if(runx + x1 > x2){
                   direction = -1;
                   runx = 0;
                 }
               }
               else if(direction == -1){ //going to the left
                 createMouse(x2 + runx,y2, direction)
                 if(runx + x2 < x1){
                   direction = 1;
                   runx =0;
                 }
               }
               else {
                 createMouse(x1 + 200,y1, direction);
               }
          }
           }
         }
         keyPressed = function(){

           if(keyCode ==74 || keyCode == 106 ){


             typeCat = "jump";

             if(abs(mouseX-(x1+runx))<10  || abs(mouseX-(x2+runx))<10){
                 //yes a catch
                 fill(0);
                 textSize(10);
                 text("jump: " +abs(mouseX-(x1+runx)) ,50,230);
                 console.log(abs(mouseX-(x1+runx)));
            	 	direction = 0;
                 runx = 0;
               	speed += 1;

             }
             else{
               typeCat = "wait";
               run = false;
             }
           }
           else if(keyCode == 87 || keyCode == 119 ){
             typeCat = "wait";
           }
         }
         mousePressed = function(){
            typeCat = "wait";
            run = false;
         }

      };
        var my1 = new p5(s2, 'c1');
        </script>
      </div>
      <p>
        <a href="https://www.openprocessing.org/sketch/396208">open sketch in openprocessing</a>
      </p>

    </div>
  </div>
</div>
<div class="w3-row">
  <div class="w3-one w3-container">
    <div class="w3-container">
      <br/>
      <p>



      </p>
    </div>
  </div>
</div>
<div class="w3-row  w3-theme-light ">
<div class="w3-container w3-half">
<pre>
function setup() {
  createCanvas(windowWidth, windowHeight);
  background(0,200,0);
}

function safeSave(filename){
  if(frameCount % 100 == 0){
    //filename use frameCount as sequence number.
    var name = filename  + frameCount + ".png";

    //copyright in the right-bottom-corner.
    fill(0);
    text("©riastroes2017", width-100, height-20);
      save(filename);
    }
}
function draw(){
    fill(random(255);
    ellipse(mouseX, mouseY, 100);
    safeSave("abstract");
  }
  </pre>
  </div>

  <div class="w3-half w3-container">
    <div class="w3-example">

      <br/>
      <div id="divcanvas4">

          <script>
        var s1 = function( p1 ) {
        p1.setup = function() {
          var canvas = p1.createCanvas(400,320);
          canvas.parent("divcanvas4");
          p1.background(0,200,0);
        }

        p1.draw = function() {

          p1.fill(p1.random(255));
          p1.ellipse(p1.mouseX, p1.mouseY, 100);
          p1.safeSave("abstract");
        }

        p1.safeSave = function(filename) {

        //  if(p1.frameCount % 100 == 0 && s1f){
            //filename use frameCount as sequence number.
            var name = filename  + p1.frameCount + ".png";
            //copyright in the right-bottom-corner.
        //    p1.fill(0);
        //    p1.text("\©riastroes2017", p1.width-100, p1.height-20);
        //    p1.save(name);
        //  }
        }
        };
        var my1 = new p5(s1, 'c1');

        </script>
      </div>
      <p>
        <a href="https://www.openprocessing.org/sketch/396293">open sketch in openprocessing</a>
      </p>

    </div>
  </div>
</div>
<div class="w3-row">
  <div class="w3-one w3-container">
    <div class="w3-container">
      <br/>
      <p>This is an example of a one-line-drawing.<br/>
        Because the first and the last vertexes are fixed, they allways have the same value
        and the dog can move on the line.</p>

    </div>
  </div>
</div>
<div class="w3-row  w3-theme-light ">
<div class="w3-container w3-half">
<pre>
  </pre>
  </div>

  <div class="w3-half w3-container">
    <div class="w3-example">

      <br/>
      <div id="divcanvas4">
        <script>
        var s3 = function( p ) {
        var x,y;
        p.setup = function() {
          var canvas = p.createCanvas(400,400);
          canvas.parent("divcanvas4");

          p.stroke(0);
          p.noFill();
          p.strokeWeight(5);
          x = 0;
          y = p.height-50;

        }
        p.draw = function() {
          p.background(200,180,220);
          p.beginShape();
            p.vertex(0,p.height-50);
            p.vertex(x, y);
            p.vertex(x, y -100);
            p.vertex(x + 5, y -100);
            p.vertex(x + 5, y -50);
            p.vertex(x + 40, y -50);
            p.vertex(x + 50, y -70);
            p.vertex(x + 55, y -80);
            p.vertex(x + 53, y -70);
            p.vertex(x + 60, y -60);
            p.vertex(x + 70, y -50);
            p.vertex(x + 60, y -40);
            p.vertex(x + 55, y -40);
            p.vertex(x + 55, y );
            p.vertex(x + 45, y );
            p.vertex(x + 45, y -20);
            p.vertex(x + 10, y -20);
            p.vertex(x + 10, y);
            p.vertex(x, y);
            p.vertex(p.width,p.height-50);
          p.endShape();
          //let's move
          x++;
          if(x>p.width){
            //start over again.
            x = 0;
          }
       }
      };
        var my1 = new p5(s3, 'c1');
        </script>
      </div>
      <p>
        <a href="https://www.openprocessing.org/sketch/396864">open sketch in openprocessing</a>
      </p>

    </div>
  </div>
</div>
  <div class="w3-row">
      <div class="w3-one " style="padding:16px">
  <h1  class="w3-theme-l2 w3-center w3-jumbo">Assignments</h1>
  <h3>3. Create a pattern with shapes.</h3>
  <ul class ="w3-ul" >
      <li>A pattern with a nested iteration.</li>
      <li>Create a motif 100  by 100 pixels</li>
      <li>x and y will increase by 100</li>
      <li>You can make the shapes smaller or bigger then the motif.</li>
  </ul>

  <h3>2. Mixed Media</h3>

  <ul class ="w3-ul" >
      <li>Search an image of an object and draw the surrounding area with shapes.</li>
      <li>Example 1: Use a photo of your self and create with shapes a landscape, mountain climbing, swimming in the sea, etc.</li>
      <li>Example 1: Use a photo of a dog and create with shape a monster, that attacks the dog.</li>
      <li>Use an image with a transparent background.</li>
      <li>Don't forget to make a sketch on paper.</li>
  </ul>

  <h3>3. One line drawing.</h3>
  <ul class ="w3-ul" >
      <li>Create a one-line-drawing</li>
      <li>First make a sketch on paper!</li>
  </ul>



<hr>
<p>

Please join my class on OpenProcessing to share your Processing sketches.<br/>
Go to:<a href="https:/www.openprocessing.org/class/55734"> https:/www.openprocessing.org/class/55734</a> and use the code: 30DEEA to join.<br/>
Or publish an image of your sketch on Facebook page <a href="https://www.facebook.com/creativecodingcourse">https://www.facebook.com/creativecodingcourse</a><br/>
It will be an inspiration for other students.<br/>
If you have any question about this lesson, send me an email <a href="mailto:riastroes@gmail.com?subject:lesson12">riastroes@gmail.com</a></p>
</p></div>
</div>

<footer class="w3-container w3-theme-d3 w3-padding-32" style="padding-left:32px">
    <span class="w3-left"><a  href="http://www.riastroes.nl">www.riastroes.nl</a></span><span class="w3-right">copyright &copy; Ria Stroes</span>
</footer>
</div>
<script>
//include HTML
w3IncludeHTML();

// Open and close the sidenav on medium and small screens
function w3_open() {
    document.getElementById("mySidenav").style.display = "block";
    document.getElementById("myOverlay").style.display = "block";
}
function w3_close() {
    document.getElementById("mySidenav").style.display = "none";
    document.getElementById("myOverlay").style.display = "none";
}

// Change style of top container on scroll
window.onscroll = function() {myFunction()};
function myFunction() {
    if (document.body.scrollTop > 80 || document.documentElement.scrollTop > 80) {
        document.getElementById("myTop").classList.add("w3-card-4");
        document.getElementById("myIntro").classList.add("w3-show-inline-block");
    } else {
        document.getElementById("myIntro").classList.remove("w3-show-inline-block");
        document.getElementById("myTop").classList.remove("w3-card-4");
    }
}

// Accordions
function myAccordion(id) {
    var x = document.getElementById(id);
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
        x.previousElementSibling.className += " w3-theme";
    } else {
        x.className = x.className.replace("w3-show", "");
        x.previousElementSibling.className =
        x.previousElementSibling.className.replace(" w3-theme", "");
    }
}
</script>

</body>
</html>
